from max7219 import Matrix8x8
from time import sleep_ms
from machine import WDT

GLYPHS = {
    "æ": [
        [0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0],
        [1,1,1,0,1,1,0,0],
        [0,0,0,1,0,0,1,0],
        [0,1,1,1,1,1,1,0],
        [1,0,0,1,0,0,0,0],
        [0,1,1,0,1,1,0,0],
        [0,0,0,0,0,0,0,0],
    ],
    "ø": [
        [0,0,0,0,0,0,0,0],
        [0,0,0,0,0,0,0,0],
        [0,0,1,1,0,1,0,0],
        [0,1,0,0,1,0,0,0],
        [0,1,0,1,0,1,0,0],
        [0,0,1,0,0,1,0,0],
        [0,1,0,1,1,0,0,0],
        [0,0,0,0,0,0,0,0],
    ],
    "å": [
        [0,0,0,1,0,0,0,0],
        [0,0,0,0,0,0,0,0],
        [0,0,1,1,1,0,0,0],
        [0,0,0,0,0,1,0,0],
        [0,0,1,1,1,1,0,0],
        [0,1,0,0,0,1,0,0],
        [0,0,1,1,1,0,0,0],
        [0,0,0,0,0,0,0,0],
    ],
    "Æ": [
        [0,0,1,1,1,1,1,0],
        [0,1,1,0,1,1,0,0],
        [1,1,0,0,1,1,0,0],
        [1,1,1,1,1,1,1,0],
        [1,1,0,0,1,1,0,0],
        [1,1,0,0,1,1,0,0],
        [1,1,0,0,1,1,1,0],
        [0,0,0,0,0,0,0,0],
        
    ],
    "Ø": [
        [0,0,1,1,1,0,1,0],
        [0,1,1,0,1,1,0,0],
        [1,1,0,0,1,1,1,0],
        [1,1,0,1,0,1,1,0],
        [1,1,1,0,0,1,1,0],
        [0,1,1,0,1,1,0,0],
        [1,0,1,1,1,0,0,0],
        [0,0,0,0,0,0,0,0],
        
    ],
    "Å": [
        [0,0,0,1,0,0,0,0],
        [0,0,0,0,0,0,0,0],
        [0,0,1,1,1,0,0,0],
        [0,1,1,0,1,1,0,0],
        [1,1,0,0,0,1,1,0],
        [1,1,1,1,1,1,1,0],
        [1,1,0,0,0,1,1,0],
        [0,0,0,0,0,0,0,0],
    ]
}

class Scroller(Matrix8x8):
    def scroll_text(self, s, ms_delay=20):
        s_width = len(s) * 8
        n_pixels = self._num * 8
        for x in range(n_pixels, -s_width, -1):
            # wdt.feed()
            self.zero()
            self.text_from_glyph(s, GLYPHS, x)
            self.show()
            sleep_ms(ms_delay)
        return s_width
    
    def display_text(self, s):
        self.text_from_glyph(s, GLYPHS)
        self.show()
